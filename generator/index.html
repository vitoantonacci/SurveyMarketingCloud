<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="utf-8">
    <title>Survey Cloud</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Generator per personalizzare la survey GUESS">
    <meta name="author" content="Vito Antonacci">
    <meta name="theme-color" content="#1d1d1d" />
    <link rel="icon" type="image/png" href="https://www.guess.eu/on/demandware.static/Sites-guess_fr-Site/-/default/dw6918018a/images/favicons/favicon.ico" />
    
    <!-- Materialize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-cloud"></i>
                    <h1>Survey Cloud</h1>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Question Builder -->
            <div class="question-builder">
                <div class="builder-header">
                    <h2 class="clickable-header" id="add-question-btn">
                        <i class="fas fa-plus-circle"></i> Aggiungi Domanda
                    </h2>
                </div>

                <!-- Question Form -->
                <div class="question-form" id="question-form" style="display: none;">
                    <div class="form-row">
                        <div class="input-field">
                            <input type="text" id="question-title" required>
                            <label for="question-title">Titolo Domanda</label>
                        </div>
                        <div class="input-field">
                            <input type="text" id="question-description">
                            <label for="question-description">Descrizione (opzionale)</label>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="input-field">
                            <select id="question-template" required>
                                <option value="">Seleziona tipo domanda</option>
                                <option value="single_choice">Scelta Singola</option>
                                <option value="multiple_choice">Scelta Multipla</option>
                                <option value="likert_scale">Scala Likert</option>
                                <option value="yes_no">Sì/No</option>
                                <option value="open_text">Testo Libero</option>
                                <option value="multi_likert">Multi-Likert</option>
                            </select>
                            <label>Tipo Domanda</label>
                        </div>
                        <div class="input-field">
                            <select id="question-required">
                                <option value="true">Obbligatoria</option>
                                <option value="false">Opzionale</option>
                            </select>
                            <label>Obbligatorietà</label>
                        </div>
                    </div>

                    <!-- Custom Answers -->
                    <div class="answers-section" id="answers-section" style="display: none;">
                        <h3><i class="fas fa-list"></i> Risposte</h3>
                        <div class="helper-text" id="answers-helper-text" style="display: none;">
                            <p><i class="fas fa-info-circle"></i> Per ogni risposta, seleziona dove indirizzare l'utente se viene scelta quella opzione.</p>
                            <p><strong>Esempio:</strong> Se risponde "Principiante" → vai alla domanda "Livello base"</p>
                        </div>
                        <div id="answers-container"></div>
                        <button type="button" class="btn btn-secondary" id="add-answer-btn">
                            <i class="fas fa-plus"></i> Aggiungi Risposta
                        </button>
                    </div>

                    <!-- Multi-Likert Aspects -->
                    <div class="aspects-section" id="aspects-section" style="display: none;">
                        <h3><i class="fas fa-layer-group"></i> Aspetti da Valutare</h3>
                        <div id="aspects-container"></div>
                        <button type="button" class="btn btn-secondary" id="add-aspect-btn">
                            <i class="fas fa-plus"></i> Aggiungi Aspetto
                        </button>
                    </div>

                    <!-- Conditional Logic Section -->
                    <div class="conditional-logic-section" id="conditional-logic-section" style="display: none;">
                        <div class="form-row">
                            <div class="switch-container">
                                <label>
                                    Logica Condizionale
                                    <div class="switch">
                                        <label>
                                            <input type="checkbox" id="enable-conditional-logic">
                                            <span class="lever"></span>
                                        </label>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Conditional Logic Fields -->
                        <div class="conditional-fields" id="conditional-fields" style="display: none;">
                            <!-- Multiple Choice / Yes-No Goto Fields -->
                            <div class="goto-section" id="goto-section" style="display: none;">
                                <h3><i class="fas fa-route"></i> Navigazione per Risposta</h3>
                                <div id="goto-container"></div>
                            </div>

                            <!-- Logic Rules Section -->
                            <div class="logic-rules-section" id="logic-rules-section" style="display: none;">
                                <h3><i class="fas fa-sitemap"></i> Regole di Logica</h3>
                                <div class="helper-text">
                                    <p><i class="fas fa-info-circle"></i> Definisci quando saltare a una domanda specifica basandoti sulla risposta dell'utente.</p>
                                    <p><strong>Esempio:</strong> Se l'utente risponde ≤ 2, vai alla domanda "Suggerimenti"</p>
                                </div>
                                <div id="logic-rules-container"></div>
                                <button type="button" class="btn btn-secondary" id="add-logic-rule-btn">
                                    <i class="fas fa-plus"></i> Aggiungi Regola
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-question-btn">Annulla</button>
                        <button type="button" class="btn btn-primary" id="save-question-btn">Salva Domanda</button>
                    </div>
                </div>
            </div>

            <!-- Questions List -->
            <div class="questions-list">
                <div class="list-header">
                    <h2><i class="fas fa-list"></i> Domande Configurate</h2>
                    <div class="list-actions">
                        <button class="btn btn-primary" id="export-btn" disabled>
                            <i class="fas fa-download"></i> Export
                        </button>
                        <button class="btn btn-secondary" id="clear-all-btn" disabled>
                            <i class="fas fa-trash"></i> Cancella tutto
                        </button>
                    </div>
                </div>
                <div id="questions-container">
                    <div class="empty-state">
                        <i class="fas fa-question-circle"></i>
                        <h3>Nessuna domanda configurata</h3>
                        <p>Aggiungi la tua prima domanda per iniziare</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Export Modal -->
    <div id="export-modal" class="modal">
        <div class="modal-content">
            <h4><i class="fas fa-code"></i> Codice Export</h4>
            <p>Copia il codice JSON e incollalo nel file <code>questions.js</code> nella sezione <code>questions: []</code></p>
            <div class="code-container">
                <textarea id="export-code" readonly></textarea>
                <button class="btn btn-primary" id="copy-code-btn">
                    <i class="fas fa-copy"></i> Copia Codice
                </button>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-close">Chiudi</button>
            </div>
        </div>
    </div>

    <!-- Clear All Modal -->
    <div id="clear-all-modal" class="modal">
        <div class="modal-content">
            <h4><i class="fas fa-exclamation-triangle"></i> Cancella Tutto</h4>
            <p>Sei sicuro di voler cancellare tutte le domande configurate?</p>
            <p><strong>Questa azione è irreversibile</strong> e cancellerà tutti i dati salvati nel browser.</p>
            <div class="modal-footer">
                <button class="btn btn-secondary clear-cancel-btn">Annulla</button>
                <button class="btn btn-primary clear-confirm-btn">
                    <i class="fas fa-trash"></i> Conferma Cancellazione
                </button>
            </div>
        </div>
    </div>

    <!-- Materialize JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- Custom JS -->
    <script src="assets/js/script.js"></script>
</body>
</html>
